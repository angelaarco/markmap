const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/code-editor.C99_KeJD.js","../chunks/disclose-version.Bg9kRutz.js","../chunks/legacy.BBZB6jHP.js","../chunks/utils.D1EJL-44.js","../chunks/template.CZkw3qFU.js","../chunks/common.BxGTHmpw.js","../chunks/if.V2DjeOVA.js","../chunks/preload-helper.BAGBm9PM.js","../chunks/index.BF2wgFgb.js","../chunks/props.h1s3Xk77.js","../chunks/lifecycle.DD7ZvZC7.js","../chunks/props.QVOWIKP-.js","../chunks/store.BSfJFfTv.js","../chunks/index-client.Du6nrK6y.js"])))=>i.map(i=>d[i]);
import{b as Ha,_ as $e}from"../chunks/preload-helper.BAGBm9PM.js";import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.BBZB6jHP.js";import{p as Ba,f as Z,b as za,c,s as l,r as m,t as q,m as O,l as ta,d as Me,$ as Pe,g as e,a as f,n as da,e as H}from"../chunks/utils.D1EJL-44.js";import{s as aa}from"../chunks/render.XC_xbPce.js";import{i as N,e as h}from"../chunks/if.V2DjeOVA.js";import{d as De,a as x,t as C}from"../chunks/template.CZkw3qFU.js";import{c as Te}from"../chunks/svelte-component.D2-ltDPJ.js";import{h as Re}from"../chunks/svelte-head.DRQ9zCnx.js";import{f as Oe,h as qa,p as He,j as Fe,a as Ie,V as Ne,k as je,r as Ve,m as Ge,n as Fa,i as We,d as Ia,g as Na,T as Je,o as Ye,q as Be,v as ja}from"../chunks/common.BxGTHmpw.js";import{a as Va}from"../chunks/class.DsbGUC_w.js";import{s as ze,p as w}from"../chunks/event-modifiers.BmwOuYlq.js";import{i as Ka}from"../chunks/lifecycle.DD7ZvZC7.js";import{s as qe,a as ca}from"../chunks/store.BSfJFfTv.js";import{g as Ke}from"../chunks/entry.CJovFaj7.js";import{n as Xe}from"../chunks/stores.v7Ic7LBG.js";import{F as Qe}from"../chunks/footer.-9OUXcFA.js";import{d as Ga,s as Ze,U as at,l as et}from"../chunks/loader.DsrySupl.js";import{p as Wa}from"../chunks/props.QVOWIKP-.js";import{c as tt,o as st}from"../chunks/index-client.Du6nrK6y.js";import{A as rt,c as lt,C as nt,D as ot,L as it,a as dt,P as ct,b as mt,S as pt,d as ut,Y as vt,e as ft,f as ht,g as gt,h as bt,i as _t,j as kt,k as wt,l as xt,m as yt,n as Ct,o as Lt,p as St,q as Et,r as At,s as Ut,t as $t,v as Mt,u as Pt}from"../chunks/public-api.mXPY6WKa.js";import{d as Ja}from"../chunks/debounce.CLTjDgnO.js";var Dt=C('<div class="text-center text-lg font-semibold mb-2"> </div>'),Tt=C('<div class="modal"><div class="modal-backdrop"></div> <div class="modal-content"><!> <div class="text-sm"><!></div></div></div>');function ma(_,p){Ba(p,!1);let b=Wa(p,"show",8,!1),g=Wa(p,"title",8);const o=tt();function S(){o("close")}Ka();var E=De(),v=Z(E);{var T=j=>{var n=Tt(),P=c(n),F=l(P,2),I=c(F);{var V=i=>{var r=Dt(),sa=c(r,!0);m(r),q(()=>aa(sa,g())),x(i,r)};N(I,i=>{g()&&i(V)})}var K=l(I,2),X=c(K);ze(X,p,"default",{}),m(K),m(F),m(n),h("click",P,S),x(j,n)};N(v,j=>{b()&&j(T)})}x(_,E),za()}function Rt(_){const p=[],b=_.length;if(b===0)return p;let g=0,o="",S="",E=!1;for(_.charCodeAt(0)===46&&(p.push(""),g++);g<b;){const v=_[g];S?v==="\\"&&g+1<b?(g++,o+=_[g]):v===S?S="":o+=v:E?v==='"'||v==="'"?S=v:v==="]"?(E=!1,p.push(o),o=""):o+=v:v==="["?(E=!0,o&&(p.push(o),o="")):v==="."?o&&(p.push(o),o=""):o+=v,g++}return o&&p.push(o),p}const Ot=/^(?:0|[1-9]\d*)$/;function Ht(_,p=Number.MAX_SAFE_INTEGER){switch(typeof _){case"number":return Number.isInteger(_)&&_>=0&&_<p;case"symbol":return!1;case"string":return Ot.test(_)}}function Q(_,p,b){const g=Array.isArray(p)?p:typeof p=="string"?Rt(p):[p];let o=_;for(let E=0;E<g.length-1;E++){const v=g[E],T=g[E+1];o[v]==null&&(o[v]=Ht(T)?[]:{}),o=o[v]}const S=g[g.length-1];return o[S]=b,_}const Ft=`<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
</style>
<!--CSS-->
</head>
<body>
<svg id="mindmap"></svg>
<!--JS-->
</body>
</html>
`,Xa=["d3@7.9.0/dist/d3.min.js","markmap-view@0.18.4/dist/browser/index.js"];function It(_,p,b){b={...b};const g=b.urlBuilder??Oe;b.baseJs??(b.baseJs=Xa.map(n=>g.getFullUrl(n)).map(n=>qa(n)));const{scripts:o,styles:S}=p,E=[...S?He(S):[]],v={getMarkmap:()=>window.markmap,getOptions:b.getOptions,jsonOptions:b.jsonOptions,root:_},T=[...Fe([...b.baseJs,...o||[],{type:"iife",data:{fn:(n,P,F,I)=>{const V=n();window.mm=V.Markmap.create("svg#mindmap",(P||V.deriveOptions)(I),F)},getParams:({getMarkmap:n,getOptions:P,root:F,jsonOptions:I})=>[n,P,F,I]}}],v)];return Ft.replace("<!--CSS-->",()=>E.join("")).replace("<!--JS-->",()=>T.join(""))}const Ya=Object.freeze(Object.defineProperty({__proto__:null,Alias:rt,CST:lt,Composer:nt,Document:ot,Lexer:it,LineCounter:dt,Pair:ct,Parser:mt,Scalar:pt,Schema:ut,YAMLError:vt,YAMLMap:ft,YAMLParseError:ht,YAMLSeq:gt,YAMLWarning:bt,isAlias:_t,isCollection:kt,isDocument:wt,isMap:xt,isNode:yt,isPair:Ct,isScalar:Lt,isSeq:St,parse:Et,parseAllDocuments:At,parseDocument:Ut,stringify:$t,visit:Mt,visitAsync:Pt},Symbol.toStringTag,{value:"Module"}));var Nt=C('<meta name="Description" content="Try the markmap REPL here.">'),jt=C('<a data-ga-label="colorize">Colorize</a>'),Vt=C('<a data-ga-label="solidColor">Use solid color</a>'),Gt=C('<a class="ml-4" data-ga-label="wrapLongText">Wrap long text</a>'),Wt=C('<span class="ml-4"><a data-ga-label="embedAssets">Embed assets</a> <sup><a data-ga-label="embedAssetsHelp">?</a></sup></span>'),Jt=C('<a>Open URL</a> <span class="ml-4"><!></span> <!> <!> <a class="ml-4" data-ga-label="expandLevel"> </a> <a class="ml-4" data-ga-label="filterElements"> </a> <a class="ml-4" data-ga-label="centerActiveNode"> </a> <a class="ml-4" href="/docs/json-options">Learn more</a>',1),Yt=C('<span class="hidden md:block px-1 bg-blue-500 text-white rounded-l"> </span>'),Bt=C('<div class="ml-2 text-red-600"> </div>'),zt=C('<div class="md:flex w-full"><form class="flex"><span class="hidden md:block mr-2">Open URL:</span> <!> <input class="flex-1 border-b border-blue-500 pl-1 min-w-0" style="width:560px" type="url"> <a class="ml-2 no-underline">&#x2713;</a> <a class="ml-2 no-underline">&#x2717;</a> <a class="ml-2 no-underline" data-ga-label="openUrlHelp">?</a></form> <!></div>'),qt=C('<div class="markmap-wrapper"><textarea class="w-full h-full p-1"></textarea></div>'),Kt=C('<ol class="text-left list-decimal pl-4"><li class="mb-1">GitHub Gist <ul class="text-xs list-disc pl-4"><li>https://gist.github.com/gera2ld/af76a4c245b302206b16aec503dbe07b</li> <li>https://gist.githubusercontent.com/gera2ld/af76a4c245b302206b16aec503dbe07b/raw/markmap.md</li></ul></li> <li class="mb-1"><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" target="_blank" rel="noopener noreferrer">CORS</a>-enabled URL to a markdown file, including raw file URL in GitHub or Gist <ul class="text-xs list-disc pl-4"><li>https://raw.githubusercontent.com/markmap/markmap/master/README.md</li></ul></li> <li class="mb-1">Short links <ul class="text-xs list-disc pl-4"><li>gist:af76a4c245b302206b16aec503dbe07b</li> <li>gist:af76a4c245b302206b16aec503dbe07b:markmap.md</li> <li>github:markmap/markmap@master</li> <li>github:markmap/markmap@master:README.md</li></ul></li></ol> <div class="modal-footer"><a>OK</a></div>',1),Xt=C('<p class="bg-red-200 border border-red-400 rounded p-2 max-w-lg">It seems you cannot connect to <code>https://cdn.jsdelivr.net</code>, try <code>Embed assets</code> to make the exported HTML work.</p>'),Qt=C('<!> <p>When enabled, all critical assets will be embedded within the exported HTML.</p> <ul class="list-disc pl-4"><li>Pros: <ul class="list-disc pl-4"><li>no further network requests when rendering the markmap</li> <li>no dependency on CDNs like jsdelivr</li></ul></li> <li>Cons: <ul class="list-disc pl-4"><li>the exported file will be bloated</li></ul></li></ul> <div class="modal-footer"><a>OK</a></div>',1),Zt=C('<p>You should save them in Gist or other file services. Do you still want to continue?</p> <div class="modal-footer"><a>Cancel</a> <a class="text-gray-500">OK</a></div>',1),as=C('<div class="fixed z-10 hidden md:block" style="top:15px;left:50%"><a class="inline-block text-sm text-orange-600 underline" href="https://marketplace.visualstudio.com/items?itemName=gera2ld.markmap-vscode" target="_blank" rel="noreferrer noopener" data-ga-label="markmapVSCodeFromREPL">Markmap in VSCode!</a></div> <main class="inner flex flex-col md:fs"><div class="flex items-center mb-4 text-sm whitespace-nowrap overflow-auto"><!></div> <div class="flex-1 min-h-0 repl flex flex-col md:grid items-stretch justify-items-stretch"><!> <!> <iframe class="markmap-wrapper" src="/inner"></iframe> <div class="text-sm text-gray-400 hidden md:block"></div> <div class="flex items-center flex-wrap whitespace-nowrap"><div class="px-4 py-2"><a>Download as interactive HTML</a></div> <div class="px-4 py-2" title="SVG export does not work well with Syntax highlighting and Katex"><a>Download as SVG</a> <span class="text-red-500">⚠️</span></div> <div class="flex-1 text-right text-xs">Press <kbd></kbd> to toggle recursively</div></div></div></main> <!> <!> <!> <!>',1);function ys(_,p){Ba(p,!1);const b=qe(),g=()=>ca(We,"$isDarkMode",b),o=()=>ca(Xe,"$navigating",b),S=()=>ca(je,"$cdnUnreachable",b),E=Ie();let v=O(),T=O(),j=O(),n=O(""),P=O(!0),F=O(!1),I=O(!1),V=O(!1),K=!1,X=O(null);const i=O({show:!1,error:null,url:Ga.asUrl(),data:Ga});let r=O();const sa={getData(){G("setFit",e(P)),G("setData",e(n))},goToFullPage(){e(n)!==ka?f(V,!0):ua()},downloadSvg(a){va("markmap.svg","data:image/svg;utf8,"+encodeURIComponent(a))},async downloadHtml({result:a}){await E;const t=Na().getUsedAssets(a.features);te({result:a,assets:t})},navigate(a){window.location.assign(a)}},Qa=Ja(se,500),Za=Ja(()=>{var a;K=!1,fa(((a=e(T))==null?void 0:a.getValue())||"")},500);function G(a,t){var s;(s=e(j))==null||s.contentWindow.postMessage({type:a,data:t},window.location.origin)}function pa(){f(V,!1)}function ua(){Ke("/full"+window.location.hash)}function va(a,t){const s=document.createElement("a");s.download=a,s.href=t,s.click()}function ae(){G("downloadSvg")}function ee(){G("downloadHtml")}async function te({result:a,assets:t}){const s=Na(),{root:d,frontmatter:$}=a,L=$==null?void 0:$.markmap,W={baseJs:[],jsonOptions:L,urlBuilder:s.urlBuilder},R=L==null?void 0:L.embedAssets;t={scripts:[...[...Xa,Je].map(k=>s.urlBuilder.getFullUrl(k)).map(k=>qa(k)),...t.scripts,{type:"iife",data:{fn:()=>{setTimeout(()=>{const{markmap:k,mm:z}=window,A=new k.Toolbar;A.attach(z);const D=A.render();D.setAttribute("style","position:absolute;bottom:20px;right:20px"),document.body.append(D)})}}}],styles:[Ye(s.urlBuilder.getFullUrl(Be)),...t.styles]},R&&([t.scripts,t.styles]=await Promise.all([Promise.all(t.scripts.map(async k=>k.type==="script"&&k.data.src?{type:"script",data:{textContent:await ja(k.data.src)}}:k)),Promise.all(t.styles.map(async k=>k.type==="stylesheet"?{type:"style",data:await ja(k.data.href)}:k))]));const B=It(d,t,W);va("markmap.html","data:text/html;utf8,"+encodeURIComponent(B))}function se(a){K||G("setCursor",a.detail-1)}function fa(a){e(n)!==a&&(f(n,a),f(P,!1))}function re(a){fa(a.target.value)}function le(){K=!0,Za()}function ne(){H(i,e(i).show=!0)}async function ha(){try{const{type:a}=e(i).data;if(!a)throw new Error("Unsupported URL");await et(e(i).data),H(i,e(i).show=!1),H(i,e(i).error=null),window.location.hash=`#?d=${encodeURIComponent(e(i).data.asData())}`,Ia("event","openUrl",{event_label:a})}catch(a){H(i,e(i).error=a.message||"Unknown error"),Ia("event","openUrl",{event_label:"error"})}}function oe(){H(i,e(i).show=!1)}function ie(a){const t=a.target.value;H(i,e(i).url=t),H(i,e(i).data=at.parse(t))}function de(){f(F,!0)}function ga(){f(F,!1)}function ce(){f(I,!0)}function ba(){f(I,!1)}function me(){if(!e(n).startsWith(`---
`))return;const a=e(n).indexOf(`
---
`);if(a<0)return;const t=e(n).slice(4,a);try{return{data:Ya.parse(t),offset:a+5}}catch{}}function Y(){let a=e(r).offset?e(n).slice(e(r).offset):e(n);a.startsWith(`
`)&&(a=a.slice(1));const t=["---",Ya.stringify(e(r).data).trim(),"---","",a].join(`
`);e(T).setValue(t)}function pe(){var a,t,s;typeof((s=(t=(a=e(r))==null?void 0:a.data)==null?void 0:t.markmap)==null?void 0:s.color)!="string"&&(f(r,Q(e(r)||{},"data.markmap.color","#2980b9")),Y())}function ue(){var a,t,s;(s=(t=(a=e(r))==null?void 0:a.data)==null?void 0:t.markmap)!=null&&s.color&&(H(r,e(r).data.markmap.color=void 0),Y())}function ve(){var a,t,s;(s=(t=(a=e(r))==null?void 0:a.data)==null?void 0:t.markmap)!=null&&s.maxWidth||(f(r,Q(e(r)||{},"data.markmap.maxWidth",300)),Y())}function fe(){var a,t,s;(s=(t=(a=e(r))==null?void 0:a.data)==null?void 0:t.markmap)!=null&&s.embedAssets||(f(r,Q(e(r)||{},"data.markmap.embedAssets",!0)),Y())}function he(){var a,t,s;((s=(t=(a=e(r))==null?void 0:a.data)==null?void 0:t.markmap)==null?void 0:s.initialExpandLevel)==null?f(r,Q(e(r)||{},"data.markmap.initialExpandLevel",1)):H(r,e(r).data.markmap.initialExpandLevel=void 0),Y()}function ge(){var a,t,s;((s=(t=(a=e(r))==null?void 0:a.data)==null?void 0:t.markmap)==null?void 0:s.htmlParser)==null?f(r,Q(e(r)||{},"data.markmap.htmlParser",{selector:"h1,h2,h3,ul,ol,li,table,pre"})):H(r,e(r).data.markmap.htmlParser=void 0),Y()}function be(){var a,t,s,d;((d=(s=(t=(a=e(r))==null?void 0:a.data)==null?void 0:t.markmap)==null?void 0:s.activeNode)==null?void 0:d.placement)==="center"?H(r,e(r).data.markmap.activeNode.placement=void 0):f(r,Q(e(r)||{},"data.markmap.activeNode.placement","center")),Y()}function _a(a){const{type:t,data:s}=a.data,d=sa[t];d==null||d(s)}async function _e(){window.addEventListener("message",_a);const{check:a,dispose:t}=Ze(s=>{var d;f(P,!0),f(n,s),ka=e(n),(d=e(T))==null||d.setValue(s)});return f(X,a),f(v,(await $e(async()=>{const{default:s}=await import("../chunks/code-editor.C99_KeJD.js");return{default:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url)).default),()=>{f(X,null),t(),window.removeEventListener("message",_a)}}let ka;st(()=>{const a=_e();return()=>{a.then(t=>t())}}),ta(()=>e(n),()=>{f(r,e(n)&&me())}),ta(()=>e(P),()=>{G("setFit",e(P))}),ta(()=>e(n),()=>{G("setData",e(n))}),ta(()=>g(),()=>{G("updateTheme",g())}),ta(()=>(o(),e(X)),()=>{var a;o()==null&&((a=e(X))==null||a())}),Me(),Ka();var wa=as();Re(a=>{var t=Nt();Pe.title="Try markmap",x(a,t)});var ra=l(Z(wa),2),la=c(ra),ke=c(la);{var we=a=>{var t=Jt(),s=Z(t),d=l(s,2),$=c(d);{var L=y=>{var u=jt();h("click",u,w(ue)),x(y,u)},W=y=>{var u=Vt();h("click",u,w(pe)),x(y,u)};N($,y=>{var u,U,M;typeof((M=(U=(u=e(r))==null?void 0:u.data)==null?void 0:U.markmap)==null?void 0:M.color)=="string"?y(L):y(W,!1)})}m(d);var R=l(d,2);{var B=y=>{var u=Gt();h("click",u,w(ve)),x(y,u)};N(R,y=>{var u,U,M;(M=(U=(u=e(r))==null?void 0:u.data)==null?void 0:U.markmap)!=null&&M.maxWidth||y(B)})}var k=l(R,2);{var z=y=>{var u=Wt(),U=c(u),M=l(U,2),ea=c(M);m(M),m(u),q(()=>{Va(U,S()?"text-orange-600":""),Va(ea,`no-underline ${S()?"text-orange-600":""}`)}),h("click",U,w(fe)),h("click",ea,w(ce)),x(y,u)};N(k,y=>{var u,U,M;(M=(U=(u=e(r))==null?void 0:u.data)==null?void 0:U.markmap)!=null&&M.embedAssets||y(z)})}var A=l(k,2),D=c(A,!0);m(A);var J=l(A,2),Ae=c(J,!0);m(J);var ia=l(J,2),Ue=c(ia,!0);m(ia),da(2),q(()=>{var y,u,U,M,ea,Pa,Da,Ta,Ra,Oa;aa(D,((U=(u=(y=e(r))==null?void 0:y.data)==null?void 0:u.markmap)==null?void 0:U.initialExpandLevel)==null?"Limit expand level":"Expand all levels"),aa(Ae,((Pa=(ea=(M=e(r))==null?void 0:M.data)==null?void 0:ea.markmap)==null?void 0:Pa.htmlParser)==null?"Filter nodes":"Show all supported nodes"),aa(Ue,((Oa=(Ra=(Ta=(Da=e(r))==null?void 0:Da.data)==null?void 0:Ta.markmap)==null?void 0:Ra.activeNode)==null?void 0:Oa.placement)==="center"?"Ensure active node visible":"Center active node")}),h("click",s,w(ne)),h("click",A,w(he)),h("click",J,w(ge)),h("click",ia,w(be)),x(a,t)},xe=a=>{var t=zt(),s=c(t),d=l(c(s),2);{var $=A=>{var D=Yt(),J=c(D,!0);m(D),q(()=>aa(J,e(i).data.desc)),x(A,D)};N(d,A=>{e(i).data.type&&A($)})}var L=l(d,2);Ve(L);var W=l(L,2),R=l(W,2),B=l(R,2);m(s);var k=l(s,2);{var z=A=>{var D=Bt(),J=c(D,!0);m(D),q(()=>aa(J,e(i).error)),x(A,D)};N(k,A=>{e(i).error&&A(z)})}m(t),q(()=>Fa(L,e(i).url)),h("input",L,ie),h("click",W,w(ha)),h("click",R,w(oe)),h("click",B,w(de)),h("submit",s,w(ha)),x(a,t)};N(ke,a=>{e(i).show?a(xe,!1):a(we)})}m(la);var xa=l(la,2),ya=c(xa);Te(ya,()=>e(v),(a,t)=>{Ha(t(a,{class:"markmap-wrapper",get initialValue(){return e(n)},$$events:{change:le,cursorMove:Qa},$$legacy:!0}),s=>f(T,s),()=>e(T))});var Ca=l(ya,2);{var ye=a=>{var t=qt(),s=c(t);Ge(s),m(t),q(()=>Fa(s,e(n))),h("input",s,re),x(a,t)};N(Ca,a=>{e(v)||a(ye)})}var La=l(Ca,2);Ha(La,a=>f(j,a),()=>e(j));var Sa=l(La,2);Sa.textContent="markmap-lib@0.18.4,markmap-view@0.18.4,markmap-render@0.18.4";var Ea=l(Sa,2),na=c(Ea),Ce=c(na);m(na);var oa=l(na,2),Le=c(oa);da(2),m(oa);var Aa=l(oa,2),Se=l(c(Aa));Se.textContent=Ne?"Cmd":"Ctrl",da(),m(Aa),m(Ea),m(xa),m(ra);var Ua=l(ra,2);Qe(Ua);var $a=l(Ua,2);ma($a,{get show(){return e(F)},title:"The following types of URLs are supported",$$events:{close:ga},children:(a,t)=>{var s=Kt(),d=l(Z(s),2),$=c(d);m(d),h("click",$,w(ga)),x(a,s)},$$slots:{default:!0}});var Ma=l($a,2);ma(Ma,{get show(){return e(I)},title:"Embedding Assets",$$events:{close:ba},children:(a,t)=>{var s=Qt(),d=Z(s);{var $=R=>{var B=Xt();x(R,B)};N(d,R=>{S()&&R($)})}var L=l(d,6),W=c(L);m(L),h("click",W,w(ba)),x(a,s)},$$slots:{default:!0}});var Ee=l(Ma,2);ma(Ee,{get show(){return e(V)},title:"Your changes will be lost!",$$events:{close:pa},children:(a,t)=>{var s=Zt(),d=l(Z(s),2),$=c(d),L=l($,2);m(d),h("click",$,w(pa)),h("click",L,w(ua)),x(a,s)},$$slots:{default:!0}}),h("click",Ce,w(ee)),h("click",Le,w(ae)),x(_,wa),za()}export{ys as component};
